{
  "ReservedMgmt1": {
    "Type": "AWS::EC2::Subnet",
    "Properties": {
      "VpcId": {
        "Ref": "PRIVATEEGRESSVPC"
      },
      "Tags": [
        {
          "Value": "ReservedMgmt1",
          "Key": "Name"
        },
        {
          "Key": "Template",
          "Value": "VPC for private endpoints egress only"
        },
        {
          "Key": "info:environment",
          "Value": "Staging"
        },
        {
          "Key": "info:owner",
          "Value": "Versent"
        }
      ],
      "Ipv6CidrBlock": {
        "Fn::Select": [
          0,
          {
            "Fn::Cidr": [
              {
                "Fn::Select": [
                  0,
                  {
                    "Fn::GetAtt": [
                      "PRIVATEEGRESSVPC",
                      "Ipv6CidrBlocks"
                    ]
                  }
                ]
              },
              3,
              64
            ]
          }
        ]
      },
      "AvailabilityZone": {
        "Fn::Select": [
          0,
          {
            "Fn::GetAZs": ""
          }
        ]
      },
      "CidrBlock": "172.16.0.0/26",
      "AssignIpv6AddressOnCreation": true
    },
    "DependsOn": "IPv6Block"
  },
  "ReservedMgmt2": {
    "Type": "AWS::EC2::Subnet",
    "Properties": {
      "VpcId": {
        "Ref": "PRIVATEEGRESSVPC"
      },
      "Tags": [
        {
          "Value": "ReservedMgmt2",
          "Key": "Name"
        },
        {
          "Key": "Template",
          "Value": "VPC for private endpoints egress only"
        },
        {
          "Key": "info:environment",
          "Value": "Staging"
        },
        {
          "Key": "info:owner",
          "Value": "Versent"
        }
      ],
      "Ipv6CidrBlock": {
        "Fn::Select": [
          1,
          {
            "Fn::Cidr": [
              {
                "Fn::Select": [
                  0,
                  {
                    "Fn::GetAtt": [
                      "PRIVATEEGRESSVPC",
                      "Ipv6CidrBlocks"
                    ]
                  }
                ]
              },
              3,
              64
            ]
          }
        ]
      },
      "AvailabilityZone": {
        "Fn::Select": [
          1,
          {
            "Fn::GetAZs": ""
          }
        ]
      },
      "CidrBlock": "172.16.1.0/26",
      "AssignIpv6AddressOnCreation": true
    },
    "DependsOn": "IPv6Block"
  },
  "ReservedMgmt3": {
    "Type": "AWS::EC2::Subnet",
    "Properties": {
      "VpcId": {
        "Ref": "PRIVATEEGRESSVPC"
      },
      "Tags": [
        {
          "Value": "ReservedMgmt3",
          "Key": "Name"
        },
        {
          "Key": "Template",
          "Value": "VPC for private endpoints egress only"
        },
        {
          "Key": "info:environment",
          "Value": "Staging"
        },
        {
          "Key": "info:owner",
          "Value": "Versent"
        }
      ],
      "Ipv6CidrBlock": {
        "Fn::Select": [
          2,
          {
            "Fn::Cidr": [
              {
                "Fn::Select": [
                  0,
                  {
                    "Fn::GetAtt": [
                      "PRIVATEEGRESSVPC",
                      "Ipv6CidrBlocks"
                    ]
                  }
                ]
              },
              3,
              64
            ]
          }
        ]
      },
      "AvailabilityZone": {
        "Fn::Select": [
          2,
          {
            "Fn::GetAZs": ""
          }
        ]
      },
      "CidrBlock": "172.16.2.0/26",
      "AssignIpv6AddressOnCreation": true
    },
    "DependsOn": "IPv6Block"
  },
  "ReservedMgmt3SubnetRoutetableAssociation": {
    "Type": "AWS::EC2::SubnetRouteTableAssociation",
    "Properties": {
      "SubnetId": {
        "Ref": "ReservedMgmt3"
      },
      "RouteTableId": {
        "Ref": "InternalRT3"
      }
    }
  },
  "ReservedMgmt3SubnetNetworkACLAssociation": {
    "Type": "AWS::EC2::SubnetNetworkAclAssociation",
    "Properties": {
      "SubnetId": {
        "Ref": "ReservedMgmt3"
      },
      "NetworkAclId": {
        "Ref": "InternalSubnetAcl"
      }
    }
  },
  "ReservedMgmt1SubnetNetworkACLAssociation": {
    "Type": "AWS::EC2::SubnetNetworkAclAssociation",
    "Properties": {
      "SubnetId": {
        "Ref": "ReservedMgmt1"
      },
      "NetworkAclId": {
        "Ref": "InternalSubnetAcl"
      }
    }
  },
  "ReservedMgmt2SubnetNetworkACLAssociation": {
    "Type": "AWS::EC2::SubnetNetworkAclAssociation",
    "Properties": {
      "SubnetId": {
        "Ref": "ReservedMgmt2"
      },
      "NetworkAclId": {
        "Ref": "InternalSubnetAcl"
      }
    }
  },
  "ReservedMgmt1SubnetRoutetableAssociation": {
    "Type": "AWS::EC2::SubnetRouteTableAssociation",
    "Properties": {
      "SubnetId": {
        "Ref": "ReservedMgmt1"
      },
      "RouteTableId": {
        "Ref": "InternalRT1"
      }
    }
  },
  "ReservedMgmt2SubnetRoutetableAssociation": {
    "Type": "AWS::EC2::SubnetRouteTableAssociation",
    "Properties": {
      "SubnetId": {
        "Ref": "ReservedMgmt2"
      },
      "RouteTableId": {
        "Ref": "InternalRT2"
      }
    }
  }
}
